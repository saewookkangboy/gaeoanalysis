# Chrome Extension 확장 개발 PRD
## 기능 중심 추가 개발 방향

## 1. 개요

### 1.1 문서 목적
현재 GAEO Analysis 웹 서비스의 핵심 기능을 Chrome Extension으로 확장하면서, 특히 **점수 측정**, **체크리스트**, **개선 방향 제시**, **최종 콘텐츠 수정안 전달** 기능에 중점을 둔 추가 개발 방향을 제시합니다.

### 1.2 핵심 가치 제안
- **실시간 점수 모니터링**: 현재 페이지의 AEO/GEO/SEO 점수와 AI 모델별 인용 확률을 즉시 확인
- **인터랙티브 체크리스트**: 분석 결과 기반 실행 가능한 개선 체크리스트 제공
- **맞춤형 개선 가이드**: AI Agent를 통한 단계별 개선 방향 제시
- **콘텐츠 수정안 자동 생성**: 분석 결과를 바탕으로 구체적인 콘텐츠 수정 제안 제공

### 1.3 대상 사용자
- 콘텐츠 크리에이터 (블로거, 유튜버, 인플루언서)
- SEO 전문가 및 마케터
- 콘텐츠 최적화에 관심이 있는 모든 사용자
- 실시간으로 콘텐츠를 수정하며 점수를 확인하고 싶은 사용자

---

## 2. 핵심 기능 상세 설계

### 2.1 점수 측정 기능

#### 2.1.1 실시간 점수 표시
**목표**: Extension 팝업에서 현재 페이지의 점수를 즉시 확인

**기능 요구사항**:
1. **종합 점수 대시보드**
   - 종합 점수 (Overall Score) 큰 숫자로 표시
   - 점수 등급 표시 (우수/양호/개선 필요)
   - 점수별 색상 구분 (80+ 녹색, 60-79 노란색, 60 미만 빨간색)
   - 점수 변화 추이 (이전 분석과 비교)

2. **세부 점수 카드**
   - AEO 점수 카드 (Answer Engine Optimization)
   - GEO 점수 카드 (Generative Engine Optimization)
   - SEO 점수 카드 (Search Engine Optimization)
   - 각 점수 카드에 아이콘과 간단한 설명 포함

3. **AI 모델별 인용 확률**
   - ChatGPT 인용 확률
   - Perplexity 인용 확률
   - Gemini 인용 확률
   - Claude 인용 확률
   - 각 모델별 점수를 아이콘과 함께 표시
   - 클릭 시 상세 정보 모달 표시

**UI 설계**:
```
┌─────────────────────────────────┐
│  종합 점수: 75/100              │
│  ⭐ 양호                        │
│  ┌───┐  ┌───┐  ┌───┐          │
│  │AEO│  │GEO│  │SEO│          │
│  │ 75│  │ 80│  │ 70│          │
│  └───┘  └───┘  └───┘          │
│  AI 인용 확률:                  │
│  🤖 ChatGPT: 85  🔍 Perplexity: 80│
│  💎 Gemini: 75  🧠 Claude: 70   │
└─────────────────────────────────┘
```

**기술 구현**:
- Extension 팝업에서 `/api/analyze` API 호출
- 분석 결과를 받아 점수 데이터 추출
- React 컴포넌트로 점수 카드 렌더링
- 점수별 애니메이션 효과 (카운트업)

#### 2.1.2 점수 히스토리 추적
**목표**: 시간에 따른 점수 변화 추적

**기능 요구사항**:
1. **점수 변화 그래프**
   - 최근 5회 분석 결과의 점수 추이
   - 간단한 라인 차트로 표시
   - Extension 팝업 하단에 축소된 형태로 표시

2. **점수 개선률 계산**
   - 이전 분석 대비 점수 변화율
   - 개선된 항목 하이라이트

**기술 구현**:
- `chrome.storage.local`에 최근 분석 결과 저장
- Chart.js 또는 간단한 SVG로 그래프 렌더링

---

### 2.2 체크리스트 기능

#### 2.2.1 인터랙티브 체크리스트
**목표**: 분석 결과를 기반으로 실행 가능한 체크리스트 제공

**기능 요구사항**:
1. **카테고리별 체크리스트**
   - AI 모델 최적화 체크리스트
   - 긴급 개선 사항 (High 우선순위)
   - 실행 가능한 개선 팁
   - 콘텐츠 작성 체크리스트
   - 추가 개선 사항 (Medium/Low 우선순위)

2. **체크리스트 인터랙션**
   - 각 항목에 체크박스 제공
   - 체크한 항목은 완료 표시 (취소선)
   - 완료한 항목 수 / 전체 항목 수 표시
   - 진행률 바 표시

3. **체크리스트 저장**
   - 사용자가 체크한 항목을 로컬에 저장
   - 페이지 재방문 시 체크 상태 복원
   - 웹 서비스와 동기화 (선택적)

**UI 설계**:
```
┌─────────────────────────────────┐
│  종합 개선 체크리스트            │
│  진행률: ████████░░ 8/12        │
├─────────────────────────────────┤
│  1. AI 모델 최적화               │
│  ☑ 구조화된 데이터 추가          │
│  ☑ FAQ 섹션 추가                 │
│  ☐ 이미지 최적화                 │
│                                 │
│  2. 긴급 개선 사항               │
│  ☑ 콘텐츠 길이 확장             │
│  ☐ 메타 설명 개선                │
└─────────────────────────────────┘
```

**기술 구현**:
- `ComprehensiveChecklistModal` 컴포넌트 로직 재사용
- Extension 팝업 내 체크리스트 섹션 구현
- `chrome.storage.local`에 체크 상태 저장
- 체크리스트 항목 클릭 시 상세 설명 표시

#### 2.2.2 우선순위별 정렬
**목표**: 중요도에 따라 체크리스트 항목 정렬

**기능 요구사항**:
1. **우선순위 표시**
   - High 우선순위 항목 상단 배치
   - Medium/Low 우선순위 항목 하단 배치
   - 우선순위별 색상 구분

2. **필터링 기능**
   - 우선순위별 필터 (High만 보기, Medium만 보기 등)
   - 카테고리별 필터
   - 완료/미완료 필터

**기술 구현**:
- 분석 결과의 `insights` 배열을 `severity` 기준으로 정렬
- React state로 필터 상태 관리

---

### 2.3 개선 방향 제시 기능

#### 2.3.1 AI Agent 통합
**목표**: Extension 팝업에서 AI Agent를 통해 개선 방향 제시

**기능 요구사항**:
1. **간소화된 AI Agent UI**
   - Extension 팝업 크기 제약을 고려한 컴팩트한 UI
   - 채팅 인터페이스 (메시지 입력창 + 답변 표시)
   - 빠른 질문 버튼 (3-4개)
   - 마크다운 렌더링 지원

2. **맞춤형 개선 가이드**
   - 분석 결과를 기반으로 한 개선 방향 제시
   - 단계별 가이드 제공
   - 예시 코드/마크업 포함
   - AI 모델별 최적화 전략 제안

3. **대화 이력 관리**
   - Extension 내 대화 이력 저장 (로컬)
   - 웹 서비스와 동기화 (선택적)
   - 대화 내보내기 기능

**UI 설계**:
```
┌─────────────────────────────────┐
│  AI 개선 가이드                  │
├─────────────────────────────────┤
│  💬 점수를 올리는 방법은?        │
│  💬 개선 우선순위는?             │
│  💬 AI 모델별 최적화 팁은?       │
├─────────────────────────────────┤
│  [메시지 입력창...]              │
│  [전송 버튼]                     │
└─────────────────────────────────┘
```

**기술 구현**:
- `/api/chat` API 호출
- Gemini API를 통한 응답 생성
- 마크다운 파싱 및 렌더링 (react-markdown)
- 스크롤 가능한 메시지 영역

#### 2.3.2 개선 가이드 카드
**목표**: 분석 결과의 인사이트를 카드 형태로 표시

**기능 요구사항**:
1. **인사이트 카드**
   - 우선순위별 정렬 (High → Medium → Low)
   - 각 인사이트에 카테고리 표시
   - 심각도별 색상 구분
   - 클릭 시 상세 설명 표시

2. **개선 제안 표시**
   - 각 인사이트에 대한 구체적인 개선 제안
   - 실행 가능한 액션 아이템
   - 예상 효과 표시

**기술 구현**:
- `InsightList` 컴포넌트 로직 재사용
- Extension 팝업에 맞게 UI 조정
- 인사이트 클릭 시 모달 또는 확장 영역 표시

---

### 2.4 최종 콘텐츠 수정안 전달 기능

#### 2.4.1 콘텐츠 수정안 생성
**목표**: 분석 결과를 바탕으로 구체적인 콘텐츠 수정 제안 생성

**기능 요구사항**:
1. **수정안 자동 생성**
   - 현재 페이지의 HTML 콘텐츠 분석
   - 분석 결과 기반 수정 제안 생성
   - AI Agent를 통한 구체적인 수정안 생성
   - Before/After 비교 표시

2. **수정안 카테고리**
   - 메타 태그 수정안
   - 콘텐츠 구조 수정안
   - 이미지 최적화 제안
   - 구조화된 데이터 추가 제안
   - 키워드 최적화 제안

3. **수정안 상세 정보**
   - 수정 위치 (HTML 요소 선택자)
   - 수정 전 내용
   - 수정 후 내용
   - 수정 이유 및 예상 효과

**UI 설계**:
```
┌─────────────────────────────────┐
│  콘텐츠 수정안                   │
├─────────────────────────────────┤
│  1. 메타 설명 개선               │
│  Before: [현재 메타 설명]       │
│  After: [개선된 메타 설명]      │
│  [복사] [적용]                   │
│                                 │
│  2. H1 태그 최적화               │
│  Before: [현재 H1]              │
│  After: [개선된 H1]             │
│  [복사] [적용]                   │
└─────────────────────────────────┘
```

**기술 구현**:
- `/api/chat` API에 "콘텐츠 수정안 생성" 요청
- Gemini API를 통해 수정안 생성
- HTML 콘텐츠 파싱 및 수정 위치 식별
- Before/After 비교 UI 구현

#### 2.4.2 수정안 적용 기능
**목표**: Extension을 통해 수정안을 실제 페이지에 적용 (선택적)

**기능 요구사항**:
1. **수정안 미리보기**
   - 수정안을 적용했을 때의 모습 미리보기
   - 페이지에 오버레이로 표시
   - 수정된 부분 하이라이트

2. **수정안 적용**
   - 사용자가 선택한 수정안만 적용
   - Content Script를 통해 DOM 수정
   - 수정 내역 저장 (로컬)

3. **수정안 내보내기**
   - 수정안을 마크다운/HTML 형식으로 내보내기
   - 웹 서비스에 저장
   - 개발자 도구에 복사

**기술 구현**:
- Content Script 작성 (`content/apply-modifications.ts`)
- DOM 조작을 통한 수정안 적용
- `chrome.storage.local`에 수정 내역 저장
- 수정안 내보내기 기능 (클립보드 복사)

#### 2.4.3 수정안 검증
**목표**: 수정안 적용 후 점수 변화 확인

**기능 요구사항**:
1. **재분석 기능**
   - 수정안 적용 후 즉시 재분석
   - 점수 변화 확인
   - 개선 효과 시각화

2. **수정안 롤백**
   - 적용한 수정안 취소
   - 원본 상태로 복원

**기술 구현**:
- 수정 전 HTML 백업
- 수정 후 재분석 API 호출
- 점수 비교 및 시각화

---

## 3. Extension 아키텍처 확장

### 3.1 컴포넌트 구조

```
chrome-extension/
├── src/
│   ├── popup/
│   │   ├── Popup.tsx                    # 메인 팝업 컴포넌트
│   │   ├── components/
│   │   │   ├── ScoreDashboard.tsx      # 점수 대시보드
│   │   │   ├── ScoreCard.tsx           # 개별 점수 카드
│   │   │   ├── AIOCitationCards.tsx    # AI 모델별 인용 확률
│   │   │   ├── ChecklistSection.tsx    # 체크리스트 섹션
│   │   │   ├── ChecklistItem.tsx       # 체크리스트 항목
│   │   │   ├── ImprovementGuide.tsx    # 개선 가이드 카드
│   │   │   ├── AIAgentCompact.tsx      # 간소화된 AI Agent
│   │   │   ├── ContentModifications.tsx # 콘텐츠 수정안
│   │   │   ├── ModificationItem.tsx    # 개별 수정안
│   │   │   └── BeforeAfterCompare.tsx   # Before/After 비교
│   │   └── styles/
│   ├── content/
│   │   ├── content.ts                  # 콘텐츠 스크립트 (기본)
│   │   ├── apply-modifications.ts      # 수정안 적용 스크립트
│   │   └── preview-modifications.ts    # 수정안 미리보기
│   ├── background/
│   │   └── background.ts               # 백그라운드 스크립트
│   ├── utils/
│   │   ├── api.ts                      # API 호출 유틸리티
│   │   ├── storage.ts                  # 로컬 스토리지 유틸리티
│   │   ├── checklist.ts                # 체크리스트 관리
│   │   └── modifications.ts            # 수정안 관리
│   └── types/
│       ├── analysis.ts                 # 분석 결과 타입
│       ├── checklist.ts                # 체크리스트 타입
│       └── modifications.ts            # 수정안 타입
```

### 3.2 데이터 흐름

```
[사용자] Extension 팝업 열기
  ↓
[Extension] 현재 URL 감지
  ↓
[Extension] 분석 API 호출 (/api/analyze)
  ↓
[웹 서비스] 분석 수행
  ↓
[Extension] 분석 결과 수신
  ↓
[Extension] 점수 표시 + 체크리스트 생성 + 개선 가이드 표시
  ↓
[사용자] AI Agent 질문 또는 수정안 요청
  ↓
[Extension] AI Agent API 호출 (/api/chat)
  ↓
[웹 서비스] Gemini API를 통한 응답 생성
  ↓
[Extension] 응답 표시 또는 수정안 생성
  ↓
[사용자] 수정안 적용 선택 (선택적)
  ↓
[Content Script] DOM 수정
  ↓
[Extension] 재분석 및 점수 확인
```

---

## 4. API 확장 설계

### 4.1 기존 API 활용

#### 4.1.1 분석 API
```
POST /api/analyze
- 기존 API 그대로 활용
- Extension에서도 동일하게 사용
```

#### 4.1.2 AI Agent API
```
POST /api/chat
- 기존 API 그대로 활용
- Extension에서도 동일하게 사용
```

### 4.2 신규 API (선택적)

#### 4.2.1 체크리스트 동기화 API
```
POST /api/checklist/sync
- Extension의 체크리스트 상태를 웹 서비스와 동기화
- 선택적 기능 (로컬 저장만으로도 충분)

Request Body:
{
  "analysisId": "analysis-uuid",
  "checkedItems": ["item-id-1", "item-id-2"]
}

Response:
{
  "success": true,
  "syncedAt": "2024-01-01T00:00:00Z"
}
```

#### 4.2.2 수정안 저장 API
```
POST /api/modifications/save
- 생성된 수정안을 웹 서비스에 저장
- 나중에 웹 서비스에서 확인 가능

Request Body:
{
  "analysisId": "analysis-uuid",
  "modifications": [
    {
      "type": "meta-description",
      "before": "현재 메타 설명",
      "after": "개선된 메타 설명",
      "reason": "SEO 점수 향상을 위해..."
    }
  ]
}

Response:
{
  "success": true,
  "modificationId": "modification-uuid"
}
```

---

## 5. UI/UX 설계

### 5.1 Extension 팝업 레이아웃

```
┌─────────────────────────────────┐
│  [GAEO Analysis]        [설정]  │
├─────────────────────────────────┤
│  현재 페이지:                   │
│  https://example.com/article    │
│  [🚀 분석 시작]                 │
├─────────────────────────────────┤
│  📊 점수 대시보드               │
│  종합: 75/100 ⭐ 양호           │
│  [AEO: 75] [GEO: 80] [SEO: 70] │
│  [AI 인용 확률 보기]            │
├─────────────────────────────────┤
│  ✅ 체크리스트 (8/12 완료)      │
│  [체크리스트 보기]              │
├─────────────────────────────────┤
│  💡 개선 가이드                 │
│  [High] 콘텐츠 길이 부족        │
│  [Medium] 이미지 최적화 필요    │
│  [더 보기]                      │
├─────────────────────────────────┤
│  🤖 AI 개선 가이드              │
│  [빠른 질문 버튼들]             │
│  [메시지 입력창]                │
├─────────────────────────────────┤
│  ✏️ 콘텐츠 수정안               │
│  [수정안 생성]                  │
│  [수정안 보기]                  │
├─────────────────────────────────┤
│  [📊 전체 결과 보기]            │
└─────────────────────────────────┘
```

### 5.2 탭 기반 UI (선택적)

Extension 팝업이 복잡해질 경우 탭으로 구분:

```
┌─────────────────────────────────┐
│  [점수] [체크리스트] [가이드] [수정안]│
├─────────────────────────────────┤
│  (선택한 탭의 내용)              │
└─────────────────────────────────┘
```

### 5.3 반응형 디자인

- Extension 팝업 크기: 최소 400px × 600px
- 스크롤 가능한 영역: 각 섹션별로 스크롤
- 모바일 대응: Extension은 데스크톱 전용

---

## 6. 구현 단계

### Phase 1: 점수 측정 기능 (2주)
**목표**: Extension에서 점수 표시 기능 구현

1. **점수 대시보드 컴포넌트**
   - ScoreDashboard 컴포넌트 구현
   - ScoreCard 컴포넌트 구현
   - AIOCitationCards 컴포넌트 구현
   - 점수 애니메이션 효과

2. **API 연동**
   - 분석 API 호출
   - 점수 데이터 파싱 및 표시

3. **점수 히스토리**
   - 로컬 스토리지에 점수 저장
   - 점수 변화 그래프 표시

### Phase 2: 체크리스트 기능 (2주)
**목표**: 인터랙티브 체크리스트 구현

1. **체크리스트 컴포넌트**
   - ChecklistSection 컴포넌트 구현
   - ChecklistItem 컴포넌트 구현
   - 체크 상태 관리

2. **체크리스트 생성 로직**
   - 분석 결과 기반 체크리스트 생성
   - 우선순위별 정렬
   - 카테고리별 그룹화

3. **체크리스트 저장**
   - 로컬 스토리지에 체크 상태 저장
   - 페이지 재방문 시 복원

### Phase 3: 개선 방향 제시 기능 (2주)
**목표**: AI Agent 통합 및 개선 가이드 표시

1. **AI Agent 통합**
   - AIAgentCompact 컴포넌트 구현
   - 채팅 인터페이스 구현
   - 마크다운 렌더링

2. **개선 가이드 카드**
   - ImprovementGuide 컴포넌트 구현
   - 인사이트 카드 표시
   - 상세 설명 모달

3. **대화 이력 관리**
   - 로컬 스토리지에 대화 저장
   - 대화 내보내기 기능

### Phase 4: 콘텐츠 수정안 전달 기능 (3주)
**목표**: 수정안 생성 및 적용 기능 구현

1. **수정안 생성**
   - ContentModifications 컴포넌트 구현
   - AI Agent를 통한 수정안 생성
   - Before/After 비교 UI

2. **수정안 적용 (선택적)**
   - Content Script 작성
   - DOM 수정 기능
   - 수정 내역 저장

3. **수정안 검증**
   - 재분석 기능
   - 점수 변화 확인
   - 롤백 기능

### Phase 5: 통합 및 폴리싱 (1주)
**목표**: 모든 기능 통합 및 UX 개선

1. **통합 테스트**
   - 모든 기능 통합 테스트
   - 에러 처리 강화

2. **UX 개선**
   - 애니메이션 추가
   - 로딩 상태 개선
   - 에러 메시지 개선

3. **성능 최적화**
   - API 호출 최적화
   - 렌더링 최적화
   - 메모리 관리

---

## 7. 기술 스택

### 7.1 Extension 개발
- **언어**: TypeScript
- **프레임워크**: React
- **빌드 도구**: Vite
- **스타일링**: Tailwind CSS
- **상태 관리**: React Context 또는 Zustand
- **차트**: Chart.js (점수 히스토리)
- **마크다운**: react-markdown (AI Agent 응답)

### 7.2 Chrome Extension API
- `chrome.tabs`: 현재 탭 정보 가져오기
- `chrome.storage`: 로컬 데이터 저장
- `chrome.runtime`: 메시지 전달
- `chrome.action`: Extension 아이콘 및 팝업 관리
- `chrome.cookies`: 웹 서비스 세션 쿠키 읽기
- `chrome.scripting`: Content Script 주입 (수정안 적용 시)

---

## 8. 데이터 저장 구조

### 8.1 로컬 스토리지 구조

```typescript
interface ExtensionStorage {
  // 점수 히스토리
  scoreHistory: Array<{
    url: string;
    timestamp: number;
    scores: {
      overall: number;
      aeo: number;
      geo: number;
      seo: number;
      aio?: {
        chatgpt: number;
        perplexity: number;
        gemini: number;
        claude: number;
      };
    };
  }>;
  
  // 체크리스트 상태
  checklistStates: Record<string, {
    url: string;
    checkedItems: string[];
    lastUpdated: number;
  }>;
  
  // AI Agent 대화 이력
  chatHistory: Record<string, {
    analysisId: string;
    messages: Array<{
      role: 'user' | 'assistant';
      content: string;
      timestamp: number;
    }>;
  }>;
  
  // 수정안 내역
  modifications: Record<string, {
    analysisId: string;
    modifications: Array<{
      type: string;
      before: string;
      after: string;
      applied: boolean;
    }>;
  }>;
}
```

---

## 9. 보안 및 개인정보 보호

### 9.1 데이터 보안
- 세션 쿠키는 암호화되어 저장됨
- API 요청은 HTTPS만 사용
- 민감한 정보는 로컬 스토리지에 저장하지 않음

### 9.2 권한 최소화
- 필요한 최소한의 Chrome API 권한만 요청
- `host_permissions`는 웹 서비스 도메인만 허용
- Content Script는 수정안 적용 시에만 주입

### 9.3 개인정보 보호
- 사용자 데이터 수집 최소화
- 분석 이력은 로컬에만 저장 (선택적 동기화)
- 개인정보 보호 정책 작성

---

## 10. 성공 지표 (KPI)

### 10.1 사용량 지표
- Extension 설치 수
- 일일 활성 사용자 수 (DAU)
- 평균 분석 횟수 (사용자당)

### 10.2 기능 사용률
- 체크리스트 완료율
- AI Agent 사용률
- 수정안 생성 및 적용률

### 10.3 사용자 만족도
- Chrome Web Store 평점
- 사용자 리뷰
- 피드백 수집

---

## 11. 향후 개선 사항

### 11.1 기능 확장
- 배치 분석 기능 (여러 URL 동시 분석)
- 분석 결과 비교 기능
- 알림 및 리마인더 기능
- 다른 브라우저 지원 (Firefox, Edge)

### 11.2 성능 개선
- 오프라인 모드 지원 (캐시된 결과 표시)
- 백그라운드 분석
- 결과 프리로딩

### 11.3 사용자 경험 개선
- 키보드 단축키 지원
- 컨텍스트 메뉴 통합
- 페이지 하이라이트 기능
- 실시간 점수 업데이트 (페이지 수정 시)

---

## 12. 리스크 및 대응 방안

### 12.1 기술적 리스크

#### 리스크: Extension 팝업 크기 제약
- **대응**: 탭 기반 UI 또는 스크롤 가능한 섹션으로 해결

#### 리스크: Content Script 주입 제한
- **대응**: 수정안 적용은 선택적 기능으로 제공, 기본은 수정안 제안만

#### 리스크: API 호출 제한
- **대응**: 캐싱 전략 및 레이트 리미팅 준수

### 12.2 사용자 경험 리스크

#### 리스크: Extension이 너무 복잡함
- **대응**: 단계적 기능 공개, 사용자 피드백 수집 및 개선

#### 리스크: 수정안 적용 시 페이지 손상
- **대응**: 수정안 적용 전 백업, 롤백 기능 제공, 명확한 안내

---

## 13. 결론

이 PRD는 GAEO Analysis Chrome Extension의 핵심 기능인 **점수 측정**, **체크리스트**, **개선 방향 제시**, **최종 콘텐츠 수정안 전달** 기능에 중점을 둔 추가 개발 방향을 제시합니다.

각 기능은 독립적으로 개발 가능하며, Phase별로 점진적으로 구현하여 사용자 피드백을 수집하고 개선할 수 있습니다. 특히 **콘텐츠 수정안 전달 기능**은 Extension의 차별화된 기능으로, 사용자가 실시간으로 콘텐츠를 개선하며 점수를 확인할 수 있는 혁신적인 경험을 제공합니다.

Extension을 통해 사용자가 더 쉽고 빠르게 콘텐츠 분석 및 개선 기능에 접근할 수 있도록 하여, 전체 서비스의 사용자 경험을 향상시키는 것이 최종 목표입니다.

