# 콘텐츠 수정안 미리보기 테스트 가이드

## 테스트 URL
**네이버 블로그**: https://blog.naver.com/mercyblu/224144269771

## 수동 테스트 절차

### 1. 개발 서버 실행 확인
```bash
# 터미널에서 확인
curl http://localhost:3000/api/health
```

### 2. 브라우저에서 테스트

#### Step 1: 로그인
1. http://localhost:3000 접속
2. 우측 상단 "로그인" 버튼 클릭
3. Google 또는 GitHub로 로그인

#### Step 2: 분석 진행
1. 메인 페이지의 URL 입력 필드에 다음 URL 입력:
   ```
   https://blog.naver.com/mercyblu/224144269771
   ```
2. "분석 시작" 버튼 클릭
3. 분석 완료 대기 (약 30초)

#### Step 3: 콘텐츠 수정안 미리보기 테스트
1. 분석 결과 페이지에서 확인:
   - ✅ "콘텐츠 수정안 미리 보기 (개발 모드)" 버튼이 표시되는지 확인
   - ✅ 버튼 클릭
2. 미리보기 모달에서:
   - ✅ "미리보기 생성" 버튼 클릭
   - ✅ 생성 완료 대기 (약 10-20초)

#### Step 4: 결과 검증

**텍스트 중심 출력 확인:**
- [ ] HTML 태그가 없는지 확인
- [ ] 마크다운 문법(#, **, [] 등)이 없는지 확인
- [ ] 순수 텍스트만 표시되는지 확인
- [ ] 블로그 플랫폼에 바로 붙여넣을 수 있는 형태인지 확인

**원문 구조 유지 확인:**
- [ ] 제목 구조가 유지되는지 확인
- [ ] 문단 순서가 유지되는지 확인
- [ ] 리스트 구조가 유지되는지 확인

**기능 확인:**
- [ ] 예상 점수 변화가 표시되는지 확인
- [ ] 개선 사항 목록이 표시되는지 확인
- [ ] 복사 기능이 작동하는지 확인 (텍스트 형식)
- [ ] 비교 뷰가 작동하는지 확인
- [ ] 변경 사항 뷰가 작동하는지 확인

## 예상 결과

### 텍스트 중심 출력 예시
```
원문 구조를 유지하면서 개선된 콘텐츠가 순수 텍스트로 표시됩니다.

제목
개선된 내용이 여기에 표시됩니다.

소제목
더 자세한 내용이 추가됩니다.

- 리스트 항목 1
- 리스트 항목 2
```

### HTML/마크다운이 제거된 형태
- ❌ `<h1>제목</h1>` → ✅ `제목`
- ❌ `# 제목` → ✅ `제목`
- ❌ `**볼드**` → ✅ `볼드`
- ❌ `[링크](url)` → ✅ `링크`

## 문제 해결

### 버튼이 보이지 않는 경우
- 개발 모드(`NODE_ENV=development`)에서만 표시됨
- 프로덕션에서는 자동으로 숨김 처리됨
- 확인: 브라우저 콘솔에서 `process.env.NODE_ENV` 확인

### 미리보기 생성 실패
1. **Gemini API 키 확인**
   ```bash
   # .env.local 파일 확인
   GEMINI_API_KEY=your-key-here
   ```

2. **네트워크 확인**
   - 브라우저 개발자 도구 → Network 탭
   - `/api/content/preview` 요청 확인

3. **콘솔 로그 확인**
   - 서버 콘솔에서 에러 메시지 확인
   - `❌ [Content Preview] 오류:` 로그 확인

### 텍스트가 제대로 표시되지 않는 경우
1. 브라우저 개발자 도구 → Elements 탭
2. `.text-content` 클래스 확인
3. `whitespace-pre-wrap` 스타일 적용 확인

## 테스트 체크리스트

- [ ] 로그인 성공
- [ ] 분석 완료
- [ ] 콘텐츠 수정안 미리보기 버튼 표시
- [ ] 미리보기 생성 성공
- [ ] 텍스트 중심으로 표시
- [ ] HTML/마크다운 제거 확인
- [ ] 원문 구조 유지 확인
- [ ] 복사 기능 작동
- [ ] 예상 점수 표시
- [ ] 개선 사항 표시

## 성능 확인

- 미리보기 생성 시간: 약 10-20초
- 캐시 동작: 두 번째 요청 시 즉시 반환
- 텍스트 길이: 원문 구조 유지하면서 적절한 길이
