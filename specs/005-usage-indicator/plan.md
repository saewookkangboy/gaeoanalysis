# 사용량 표시 컴포넌트 구현 계획

## 📋 기본 정보

- **기능명**: 사용량 표시 컴포넌트
- **명세서**: [spec.md](./spec.md)
- **예상 소요 시간**: 4-6시간
- **작성일**: 2025-12-04
- **작성자**: chunghyo, cursor ai(AI CODE IDE)

---

## 🎯 구현 개요

### 목표
Freemium 모델의 사용량을 시각적으로 표시하는 컴포넌트를 구현하여 사용자가 현재 사용량과 남은 사용량을 쉽게 파악할 수 있도록 함

### 범위
- **포함 사항**: 
  - 사용량 표시 컴포넌트
  - 진행 바 시각화
  - 경고 표시
  - 업그레이드 버튼
- **제외 사항**: 
  - 가격 페이지 (별도 작업)
  - 결제 플로우 (별도 작업)

### 주요 의존성
- Freemium 모델 API (`/api/usage`)
- 기존 디자인 시스템 (Tailwind CSS)
- 기존 컴포넌트 스타일

---

## 📅 구현 단계

### Phase 1: 컴포넌트 기본 구조 (1시간)

#### Task 1.1: 컴포넌트 파일 생성
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 기본 컴포넌트 구조
  - Props 타입 정의
  - 기본 스타일링
- **의존성**: 없음
- **예상 시간**: 30분

#### Task 1.2: 사용량 데이터 타입 정의
- **파일**: `components/UsageIndicator.tsx` 또는 `types/usage.ts`
- **내용**: 
  - UsageInfo 인터페이스
  - UsageIndicatorProps 인터페이스
- **의존성**: Task 1.1
- **예상 시간**: 15분

#### Task 1.3: 기본 레이아웃 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 카드 레이아웃
  - 리소스 타입별 섹션
  - 기본 스타일링
- **의존성**: Task 1.2
- **예상 시간**: 15분

---

### Phase 2: 사용량 표시 구현 (1.5시간)

#### Task 2.1: 진행 바 컴포넌트 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 진행 바 계산 로직 (used/limit * 100)
  - 무제한 플랜 처리 (limit === -1)
  - 진행 바 시각화
- **의존성**: Phase 1 완료
- **예상 시간**: 30분

#### Task 2.2: 사용량 정보 표시
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 사용량/제한/남은 표시
  - 퍼센트 표시
  - 무제한 표시
- **의존성**: Task 2.1
- **예상 시간**: 30분

#### Task 2.3: 스타일링 및 애니메이션
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - Tailwind CSS 스타일링
  - 진행 바 애니메이션
  - 반응형 디자인
- **의존성**: Task 2.2
- **예상 시간**: 30분

---

### Phase 3: 경고 및 업그레이드 기능 (1.5시간)

#### Task 3.1: 경고 로직 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 80% 이상 사용 시 경고 색상
  - 100% 도달 시 경고 색상
  - 경고 메시지 표시
- **의존성**: Phase 2 완료
- **예상 시간**: 30분

#### Task 3.2: 업그레이드 버튼 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - Free 플랜 사용자에게만 표시
  - 버튼 스타일링 (CTA)
  - 클릭 시 가격 페이지로 이동
- **의존성**: Task 3.1
- **예상 시간**: 30분

#### Task 3.3: 컴팩트 모드 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - compact prop 처리
  - 컴팩트 레이아웃
  - 조건부 렌더링
- **의존성**: Task 3.2
- **예상 시간**: 30분

---

### Phase 4: API 연동 및 통합 (1시간)

#### Task 4.1: API 연동 구현
- **파일**: `components/UsageIndicator.tsx` 또는 `app/[page]/page.tsx`
- **내용**: 
  - `/api/usage` 호출
  - 에러 처리
  - 로딩 상태 관리
- **의존성**: Phase 3 완료
- **예상 시간**: 30분

#### Task 4.2: 메인 페이지 통합
- **파일**: `app/page.tsx`
- **내용**: 
  - UsageIndicator 컴포넌트 추가
  - 적절한 위치에 배치
  - 사용량 업데이트 로직
- **의존성**: Task 4.1
- **예상 시간**: 30분

---

### Phase 5: 테스트 및 검증 (1시간)

#### Task 5.1: 단위 테스트 작성
- **파일**: `__tests__/UsageIndicator.test.tsx` (선택적)
- **내용**: 
  - 사용량 계산 로직 테스트
  - 경고 표시 로직 테스트
- **의존성**: Phase 4 완료
- **예상 시간**: 30분

#### Task 5.2: 수동 테스트 수행
- **내용**: 
  - Free 플랜 사용량 표시 확인
  - Pro 플랜 사용량 표시 확인
  - 경고 표시 확인
  - 업그레이드 버튼 동작 확인
  - 반응형 디자인 확인
- **의존성**: Phase 4 완료
- **예상 시간**: 30분

---

## 🔄 마이그레이션 계획

### 데이터 마이그레이션
- 없음 (기존 API 사용)

### 스키마 변경
- 없음

### 롤백 계획
- 컴포넌트 제거만으로 롤백 가능

---

## ⚠️ 리스크 관리

### 기술적 리스크
- **리스크**: API 응답 지연
  - **확률**: Low
  - **영향**: Medium
  - **대응 방안**: 로딩 상태 표시, 에러 처리

### 일정 리스크
- **리스크**: 예상 시간 초과
  - **확률**: Low
  - **대응 방안**: 우선순위 낮은 기능 제외 (컴팩트 모드 등)

---

## 📊 진행 상황 추적

### 진행률
- **전체 진행률**: 0%
- **Phase 1**: 0%
- **Phase 2**: 0%
- **Phase 3**: 0%
- **Phase 4**: 0%
- **Phase 5**: 0%

---

## 🔗 관련 문서

- [명세서](./spec.md)
- [Freemium 모델 명세서](../003-freemium-model/spec.md)
- [프로젝트 Constitution](../../memory/constitution.md)

---

## ✅ 구현 계획 검증 체크리스트

- [x] 구현 단계 논리적 순서
- [x] 의존성 올바름
- [x] 예상 소요 시간 현실적
- [x] 리스크 식별 및 대응 계획
- [x] 롤백 계획 명확함
- [x] 테스트 계획 포함됨

---

**구현 계획 버전**: 1.0  
**최종 업데이트**: 2025-12-04  
**다음 단계**: [Tasks 작성](./tasks.md)

