# 사용량 표시 컴포넌트 작업 분해

## 📋 기본 정보

- **기능명**: 사용량 표시 컴포넌트
- **명세서**: [spec.md](./spec.md)
- **구현 계획**: [plan.md](./plan.md)
- **총 예상 소요 시간**: 4-6시간
- **작성일**: 2025-12-04
- **작성자**: chunghyo, cursor ai(AI CODE IDE)

---

## 🎯 작업 분해 원칙

### 작업 단위 기준
- 각 작업은 **1-2시간** 내 완료 가능해야 함
- 각 작업은 **명확한 입력/출력**이 있어야 함
- 각 작업은 **독립적으로 테스트** 가능해야 함

### 작업 표기법
- `[P]`: 병렬 실행 가능한 작업
- `[B]`: 블로커 작업 (다른 작업이 이 작업에 의존)
- `[C]`: 체크포인트 작업 (단계 완료 확인)

---

## 📅 Phase 1: 컴포넌트 기본 구조

**예상 소요 시간**: 1시간  
**목표**: 컴포넌트 기본 구조 및 타입 정의

### Task 1.1: 컴포넌트 파일 생성
- **파일**: `components/UsageIndicator.tsx`
- **내용**: 
  - 기본 React 컴포넌트 구조
  - 'use client' 지시어 추가
  - 기본 export
- **의존성**: 없음
- **예상 시간**: 15분
- **체크리스트**:
  - [ ] 파일 생성
  - [ ] 기본 컴포넌트 구조 작성
  - [ ] TypeScript 컴파일 확인

### Task 1.2: Props 타입 정의
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - UsageInfo 인터페이스 정의
  - UsageIndicatorProps 인터페이스 정의
  - 타입 export
- **의존성**: Task 1.1
- **예상 시간**: 15분
- **체크리스트**:
  - [ ] UsageInfo 인터페이스 작성
  - [ ] UsageIndicatorProps 인터페이스 작성
  - [ ] 타입 검증 (TypeScript 컴파일)

### Task 1.3: 기본 레이아웃 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 카드 레이아웃 (div with border, rounded, padding)
  - 리소스 타입별 섹션 (분석, 챗봇)
  - 기본 Tailwind CSS 스타일링
- **의존성**: Task 1.2
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 카드 레이아웃 작성
  - [ ] 리소스 타입별 섹션 작성
  - [ ] 기본 스타일링 적용
  - [ ] 반응형 디자인 적용

### [C] Phase 1 체크포인트
- [ ] 컴포넌트 파일 생성 완료
- [ ] 타입 정의 완료
- [ ] 기본 레이아웃 완료
- [ ] TypeScript 컴파일 에러 없음

---

## 📅 Phase 2: 사용량 표시 구현

**예상 소요 시간**: 1.5시간  
**목표**: 사용량 정보 시각화

### Task 2.1: 진행 바 계산 로직
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 진행률 계산 함수 (used/limit * 100)
  - 무제한 플랜 처리 (limit === -1)
  - 퍼센트 포맷팅
- **의존성**: Phase 1 완료
- **예상 시간**: 20분
- **체크리스트**:
  - [ ] 진행률 계산 함수 작성
  - [ ] 무제한 플랜 처리 로직
  - [ ] 엣지 케이스 처리 (0, 100%)

### Task 2.2: 진행 바 컴포넌트 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 진행 바 div 요소
  - 진행률에 따른 width 설정
  - 배경색 및 진행 바 색상
  - 애니메이션 효과 (transition)
- **의존성**: Task 2.1
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 진행 바 HTML 구조 작성
  - [ ] 동적 width 설정
  - [ ] 색상 적용
  - [ ] 애니메이션 적용

### Task 2.3: 사용량 정보 표시
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 사용량/제한/남은 텍스트 표시
  - 퍼센트 표시
  - 무제한 표시 ("무제한" 텍스트)
  - 리소스 타입별 라벨
- **의존성**: Task 2.2
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 사용량 정보 텍스트 작성
  - [ ] 퍼센트 표시
  - [ ] 무제한 표시
  - [ ] 라벨 추가

### Task 2.4: 스타일링 개선
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 다크 모드 지원
  - 반응형 디자인 개선
  - 간격 및 패딩 조정
  - 타이포그래피 개선
- **의존성**: Task 2.3
- **예상 시간**: 10분
- **체크리스트**:
  - [ ] 다크 모드 스타일 추가
  - [ ] 반응형 디자인 확인
  - [ ] 스타일 일관성 확인

### [C] Phase 2 체크포인트
- [ ] 진행 바 구현 완료
- [ ] 사용량 정보 표시 완료
- [ ] 스타일링 완료
- [ ] 다크 모드 지원 완료

---

## 📅 Phase 3: 경고 및 업그레이드 기능

**예상 소요 시간**: 1.5시간  
**목표**: 경고 표시 및 업그레이드 기능

### Task 3.1: 경고 로직 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 80% 이상 사용 시 경고 색상 (노란색)
  - 100% 도달 시 경고 색상 (빨간색)
  - 경고 상태 계산 함수
- **의존성**: Phase 2 완료
- **예상 시간**: 20분
- **체크리스트**:
  - [ ] 경고 상태 계산 함수 작성
  - [ ] 색상 매핑 로직
  - [ ] 엣지 케이스 처리

### Task 3.2: 경고 메시지 표시
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - 경고 메시지 텍스트
  - 조건부 렌더링
  - 아이콘 추가 (선택적)
- **의존성**: Task 3.1
- **예상 시간**: 20분
- **체크리스트**:
  - [ ] 경고 메시지 작성
  - [ ] 조건부 렌더링 구현
  - [ ] 스타일링 적용

### Task 3.3: 업그레이드 버튼 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - Free 플랜 사용자에게만 표시
  - 버튼 컴포넌트
  - 클릭 핸들러 (가격 페이지로 이동)
  - CTA 스타일링
- **의존성**: Task 3.2
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 조건부 렌더링 (planType === 'free')
  - [ ] 버튼 컴포넌트 작성
  - [ ] 클릭 핸들러 구현
  - [ ] 스타일링 적용

### Task 3.4: 컴팩트 모드 구현
- **파일**: `components/UsageIndicator.tsx`
- **내용**:
  - compact prop 처리
  - 컴팩트 레이아웃 (간소화된 정보)
  - 조건부 렌더링
- **의존성**: Task 3.3
- **예상 시간**: 20분
- **체크리스트**:
  - [ ] compact prop 처리
  - [ ] 컴팩트 레이아웃 작성
  - [ ] 조건부 렌더링 구현

### [C] Phase 3 체크포인트
- [ ] 경고 로직 구현 완료
- [ ] 경고 메시지 표시 완료
- [ ] 업그레이드 버튼 구현 완료
- [ ] 컴팩트 모드 구현 완료

---

## 📅 Phase 4: API 연동 및 통합

**예상 소요 시간**: 1시간  
**목표**: API 연동 및 메인 페이지 통합

### Task 4.1: API 호출 로직 구현
- **파일**: `app/page.tsx` 또는 별도 훅
- **내용**:
  - `/api/usage` API 호출
  - useState로 사용량 상태 관리
  - useEffect로 초기 로드
  - 에러 처리
  - 로딩 상태 관리
- **의존성**: Phase 3 완료
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] API 호출 함수 작성
  - [ ] 상태 관리 구현
  - [ ] 에러 처리 구현
  - [ ] 로딩 상태 관리

### Task 4.2: 메인 페이지 통합
- **파일**: `app/page.tsx`
- **내용**:
  - UsageIndicator 컴포넌트 import
  - 적절한 위치에 배치 (Navigation 아래 또는 분석 결과 위)
  - 사용량 데이터 전달
  - 분석 완료 후 사용량 업데이트
- **의존성**: Task 4.1
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 컴포넌트 import
  - [ ] 컴포넌트 배치
  - [ ] props 전달
  - [ ] 사용량 업데이트 로직

### [C] Phase 4 체크포인트
- [ ] API 연동 완료
- [ ] 메인 페이지 통합 완료
- [ ] 사용량 업데이트 동작 확인

---

## 📅 Phase 5: 테스트 및 검증

**예상 소요 시간**: 1시간  
**목표**: 테스트 및 최종 검증

### Task 5.1: 단위 테스트 작성 (선택적)
- **파일**: `__tests__/UsageIndicator.test.tsx`
- **내용**:
  - 사용량 계산 로직 테스트
  - 경고 표시 로직 테스트
  - 진행 바 계산 테스트
- **의존성**: Phase 4 완료
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 테스트 파일 생성
  - [ ] 계산 로직 테스트 작성
  - [ ] 모든 테스트 통과

### Task 5.2: 수동 테스트 수행
- **내용**: 
  - Free 플랜 사용량 표시 확인
  - Pro 플랜 사용량 표시 확인 (무제한)
  - Business 플랜 사용량 표시 확인
  - 경고 표시 확인 (80%, 100%)
  - 업그레이드 버튼 동작 확인
  - 반응형 디자인 확인
  - 다크 모드 확인
- **의존성**: Phase 4 완료
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 모든 플랜 테스트
  - [ ] 경고 표시 테스트
  - [ ] 업그레이드 버튼 테스트
  - [ ] 반응형 디자인 테스트
  - [ ] 다크 모드 테스트

### [C] Phase 5 체크포인트
- [ ] 단위 테스트 작성 완료 (선택적)
- [ ] 수동 테스트 완료
- [ ] 모든 기능 동작 확인

---

## 📊 진행 상황 추적

### 전체 진행률
- **전체**: 0%
- **Phase 1**: 0%
- **Phase 2**: 0%
- **Phase 3**: 0%
- **Phase 4**: 0%
- **Phase 5**: 0%

### 완료된 작업
- [완료된 작업 목록]

### 진행 중인 작업
- [진행 중인 작업 목록]

### 블로커
- [블로커 목록]

---

## 🔗 관련 문서

- [명세서](./spec.md)
- [구현 계획](./plan.md)
- [Freemium 모델 명세서](../003-freemium-model/spec.md)
- [프로젝트 Constitution](../../memory/constitution.md)

---

**작업 분해 버전**: 1.0  
**최종 업데이트**: 2025-12-04  
**다음 단계**: [Implementation 시작](../../SPEC_KIT_IMPLEMENTATION_CHECKLIST.md#phase-7-implementation-구현)

