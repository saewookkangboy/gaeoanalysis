# 로그인 전 분석 시작 UX 개선 구현 계획

## 📋 기본 정보

- **기능명**: 로그인 전 분석 시작 UX 개선
- **명세서**: [spec.md](./spec.md)
- **예상 소요 시간**: 4-6시간
- **작성일**: 2025-12-04
- **작성자**: chunghyo, cursor ai(AI CODE IDE)

---

## 🎯 구현 개요

### 목표
비로그인 사용자가 분석 시작 버튼을 클릭했을 때, 명확한 안내 모달을 표시하고 로그인 후 자동으로 분석을 시작할 수 있도록 UX 개선

### 범위
- **포함 사항**: 
  - 로그인 안내 모달 컴포넌트
  - 로그인 상태 확인 로직
  - 로그인 페이지 리디렉션 (URL 파라미터 포함)
  - 로그인 완료 후 자동 복귀 및 분석 시작
- **제외 사항**: 
  - 로그인 페이지 자체 수정 (최소한의 수정만)
  - 기존 분석 플로우 변경 없음

### 주요 의존성
- 기존 인증 시스템 (NextAuth.js)
- 기존 분석 플로우 (`handleAnalyze` 함수)
- 기존 URL 입력 컴포넌트 (`UrlInput`)

---

## 📅 구현 단계

### Phase 1: 로그인 안내 모달 컴포넌트 (1.5시간)

#### Task 1.1: 모달 컴포넌트 생성
- **파일**: `components/LoginRequiredModal.tsx`
- **내용**: 
  - 모달 컴포넌트 기본 구조
  - Props 타입 정의
  - 기본 스타일링
- **의존성**: 없음
- **예상 시간**: 30분

#### Task 1.2: 모달 UI 구현
- **파일**: `components/LoginRequiredModal.tsx`
- **내용**: 
  - 안내 메시지 표시
  - 소셜 로그인 버튼 (Google, GitHub)
  - 취소 버튼
  - 모달 닫기 기능
- **의존성**: Task 1.1
- **예상 시간**: 1시간

---

### Phase 2: 로그인 상태 확인 및 모달 통합 (1.5시간)

#### Task 2.1: 분석 시작 함수 수정
- **파일**: `app/page.tsx`
- **내용**: 
  - `handleAnalyze` 함수에서 로그인 상태 확인
  - 비로그인 시 모달 표시
  - 로그인 시 기존 분석 플로우 진행
- **의존성**: Phase 1 완료
- **예상 시간**: 1시간

#### Task 2.2: 모달 상태 관리
- **파일**: `app/page.tsx`
- **내용**: 
  - 모달 열기/닫기 상태 관리
  - 모달에서 로그인 버튼 클릭 핸들러
- **의존성**: Task 2.1
- **예상 시간**: 30분

---

### Phase 3: 로그인 페이지 리디렉션 (1시간)

#### Task 3.1: 로그인 페이지로 리디렉션 로직
- **파일**: `app/page.tsx`
- **내용**: 
  - 모달에서 로그인 버튼 클릭 시 로그인 페이지로 리디렉션
  - URL 파라미터로 분석 의도 및 입력한 URL 전달
  - `router.push` 또는 `window.location.href` 사용
- **의존성**: Phase 2 완료
- **예상 시간**: 30분

#### Task 3.2: 로그인 페이지에서 파라미터 처리
- **파일**: `app/login/page.tsx`
- **내용**: 
  - URL 파라미터에서 `intent` 및 `url` 확인
  - 파라미터를 세션 스토리지 또는 쿠키에 저장 (선택적)
- **의존성**: Task 3.1
- **예상 시간**: 30분

---

### Phase 4: 로그인 완료 후 자동 복귀 및 분석 시작 (2시간)

#### Task 4.1: 로그인 완료 후 복귀 로직
- **파일**: `app/login/page.tsx`
- **내용**: 
  - 로그인 성공 시 URL 파라미터 확인
  - `intent=analyze`이고 `url`이 있으면 원래 페이지로 복귀
  - 복귀 시 URL 파라미터 전달
- **의존성**: Phase 3 완료
- **예상 시간**: 1시간

#### Task 4.2: 자동 분석 시작 로직
- **파일**: `app/page.tsx`
- **내용**: 
  - URL 파라미터에서 `intent=analyze` 및 `url` 확인
  - URL이 있으면 자동으로 `handleAnalyze` 호출
  - URL이 없으면 분석 시작 버튼 클릭 이전 단계로 복귀
- **의존성**: Task 4.1
- **예상 시간**: 1시간

---

## 🔄 마이그레이션 계획

### 데이터 마이그레이션
- 없음

### 스키마 변경
- 없음

### 롤백 계획
- 모달 컴포넌트 제거
- `handleAnalyze` 함수 원래 상태로 복원
- 로그인 페이지 수정 사항 제거

---

## ⚠️ 리스크 관리

### 기술적 리스크
- **리스크**: URL 파라미터 길이 제한
  - **확률**: Low
  - **영향**: Medium
  - **대응 방안**: 세션 스토리지 또는 쿠키 사용 고려

### 일정 리스크
- **리스크**: 예상 시간 초과
  - **확률**: Low
  - **대응 방안**: 우선순위 낮은 기능 제외

---

## 📊 진행 상황 추적

### 진행률
- **전체 진행률**: 0%
- **Phase 1**: 0%
- **Phase 2**: 0%
- **Phase 3**: 0%
- **Phase 4**: 0%

---

## 🔗 관련 문서

- [명세서](./spec.md)
- [프로젝트 Constitution](../../memory/constitution.md)

---

## ✅ 구현 계획 검증 체크리스트

- [x] 구현 단계 논리적 순서
- [x] 의존성 올바름
- [x] 예상 소요 시간 현실적
- [x] 리스크 식별 및 대응 계획
- [x] 롤백 계획 명확함
- [x] 테스트 계획 포함됨

---

**구현 계획 버전**: 1.0  
**최종 업데이트**: 2025-12-04  
**다음 단계**: [Tasks 작성](./tasks.md)

