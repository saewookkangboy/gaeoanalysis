# 로그인 전 분석 시작 UX 개선 작업 분해

## 📋 기본 정보

- **기능명**: 로그인 전 분석 시작 UX 개선
- **명세서**: [spec.md](./spec.md)
- **구현 계획**: [plan.md](./plan.md)
- **총 예상 소요 시간**: 4-6시간
- **작성일**: 2025-12-04
- **작성자**: chunghyo, cursor ai(AI CODE IDE)

---

## 🎯 작업 분해 원칙

### 작업 단위 기준
- 각 작업은 **1-2시간** 내 완료 가능해야 함
- 각 작업은 **명확한 입력/출력**이 있어야 함
- 각 작업은 **독립적으로 테스트** 가능해야 함

### 작업 표기법
- `[P]`: 병렬 실행 가능한 작업
- `[B]`: 블로커 작업 (다른 작업이 이 작업에 의존)
- `[C]`: 체크포인트 작업 (단계 완료 확인)

---

## 📅 Phase 1: 로그인 안내 모달 컴포넌트

**예상 소요 시간**: 1.5시간  
**목표**: 로그인 안내 모달 컴포넌트 생성

### Task 1.1: 모달 컴포넌트 기본 구조
- **파일**: `components/LoginRequiredModal.tsx`
- **내용**:
  - React 컴포넌트 기본 구조
  - Props 타입 정의 (`LoginRequiredModalProps`)
  - 모달 오버레이 및 컨테이너 구조
  - 기본 스타일링 (Tailwind CSS)
- **의존성**: 없음
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 컴포넌트 파일 생성
  - [ ] Props 타입 정의
  - [ ] 기본 구조 작성
  - [ ] 기본 스타일링 적용

### Task 1.2: 모달 UI 구현
- **파일**: `components/LoginRequiredModal.tsx`
- **내용**:
  - 안내 메시지 표시 ("소셜 로그인을 진행 후, 분석 시작을 진행합니다")
  - 소셜 로그인 버튼 (Google, GitHub)
  - 취소 버튼
  - 모달 닫기 기능 (X 버튼, 오버레이 클릭)
  - 반응형 디자인
- **의존성**: Task 1.1
- **예상 시간**: 1시간
- **체크리스트**:
  - [ ] 안내 메시지 UI 작성
  - [ ] 소셜 로그인 버튼 구현
  - [ ] 취소 버튼 구현
  - [ ] 모달 닫기 기능 구현
  - [ ] 반응형 디자인 적용
  - [ ] 다크 모드 지원

### [C] Phase 1 체크포인트
- [ ] 모달 컴포넌트 완료
- [ ] UI 구현 완료
- [ ] 스타일링 완료
- [ ] TypeScript 컴파일 에러 없음

---

## 📅 Phase 2: 로그인 상태 확인 및 모달 통합

**예상 소요 시간**: 1.5시간  
**목표**: 분석 시작 함수에 로그인 상태 확인 및 모달 통합

### Task 2.1: 로그인 상태 확인 로직 추가
- **파일**: `app/page.tsx`
- **내용**:
  - `handleAnalyze` 함수 시작 부분에 로그인 상태 확인
  - `useSession` 훅으로 세션 확인
  - 비로그인 시 모달 표시, 로그인 시 기존 플로우 진행
- **의존성**: Phase 1 완료
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 로그인 상태 확인 로직 추가
  - [ ] 조건부 분기 처리
  - [ ] 기존 분석 플로우 유지

### Task 2.2: 모달 상태 관리 및 통합
- **파일**: `app/page.tsx`
- **내용**:
  - 모달 열기/닫기 상태 (`useState`)
  - `LoginRequiredModal` 컴포넌트 import 및 사용
  - 모달에서 로그인 버튼 클릭 핸들러
  - 입력한 URL 전달
- **의존성**: Task 2.1
- **예상 시간**: 1시간
- **체크리스트**:
  - [ ] 모달 상태 관리 추가
  - [ ] 모달 컴포넌트 통합
  - [ ] 로그인 버튼 클릭 핸들러 구현
  - [ ] URL 전달 로직 구현

### [C] Phase 2 체크포인트
- [ ] 로그인 상태 확인 로직 완료
- [ ] 모달 통합 완료
- [ ] 로그인 버튼 클릭 핸들러 완료
- [ ] 기존 분석 플로우 정상 동작 확인

---

## 📅 Phase 3: 로그인 페이지 리디렉션

**예상 소요 시간**: 1시간  
**목표**: 로그인 페이지로 리디렉션 및 URL 파라미터 전달

### Task 3.1: 로그인 페이지 리디렉션 로직
- **파일**: `app/page.tsx`
- **내용**:
  - 모달에서 로그인 버튼 클릭 시 로그인 페이지로 리디렉션
  - URL 파라미터 생성 (`?intent=analyze&url={encodedUrl}`)
  - `router.push` 또는 `window.location.href` 사용
  - 입력한 URL URL 인코딩
- **의존성**: Phase 2 완료
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] 리디렉션 로직 구현
  - [ ] URL 파라미터 생성
  - [ ] URL 인코딩 처리
  - [ ] 테스트

### Task 3.2: 로그인 페이지에서 파라미터 처리
- **파일**: `app/login/page.tsx`
- **내용**:
  - `useSearchParams`로 URL 파라미터 확인
  - `intent` 및 `url` 파라미터 추출
  - 세션 스토리지에 저장 (선택적, 로그인 완료 후 사용)
- **의존성**: Task 3.1
- **예상 시간**: 30분
- **체크리스트**:
  - [ ] URL 파라미터 파싱 로직 추가
  - [ ] 세션 스토리지 저장 (선택적)
  - [ ] 에러 처리

### [C] Phase 3 체크포인트
- [ ] 리디렉션 로직 완료
- [ ] URL 파라미터 전달 완료
- [ ] 로그인 페이지에서 파라미터 처리 완료
- [ ] 테스트 완료

---

## 📅 Phase 4: 로그인 완료 후 자동 복귀 및 분석 시작

**예상 소요 시간**: 2시간  
**목표**: 로그인 완료 후 원래 페이지로 복귀하고 자동 분석 시작

### Task 4.1: 로그인 완료 후 복귀 로직
- **파일**: `app/login/page.tsx`
- **내용**:
  - 로그인 성공 시 (`status === 'authenticated'`) URL 파라미터 확인
  - `intent=analyze`이고 `url`이 있으면 원래 페이지로 복귀
  - 복귀 시 URL 파라미터 전달 (`?intent=analyze&url=...`)
  - 일반 로그인은 기존대로 메인 페이지로 이동
- **의존성**: Phase 3 완료
- **예상 시간**: 1시간
- **체크리스트**:
  - [ ] 로그인 성공 시 파라미터 확인 로직
  - [ ] 조건부 리디렉션 구현
  - [ ] URL 파라미터 전달
  - [ ] 테스트

### Task 4.2: 자동 분석 시작 로직
- **파일**: `app/page.tsx`
- **내용**:
  - 페이지 로드 시 URL 파라미터 확인 (`useSearchParams`)
  - `intent=analyze`이고 `url`이 있으면:
    - URL 입력 필드에 URL 설정
    - 자동으로 `handleAnalyze` 호출
  - URL이 없으면 일반 페이지 로드
  - 파라미터 처리 후 URL 정리 (히스토리 정리)
- **의존성**: Task 4.1
- **예상 시간**: 1시간
- **체크리스트**:
  - [ ] URL 파라미터 확인 로직 추가
  - [ ] 자동 URL 설정 로직
  - [ ] 자동 분석 시작 로직
  - [ ] URL 정리 로직
  - [ ] 테스트

### [C] Phase 4 체크포인트
- [ ] 로그인 완료 후 복귀 로직 완료
- [ ] 자동 분석 시작 로직 완료
- [ ] 전체 플로우 테스트 완료
- [ ] 에러 처리 확인

---

## 📊 진행 상황 추적

### 전체 진행률
- **전체**: 0%
- **Phase 1**: 0%
- **Phase 2**: 0%
- **Phase 3**: 0%
- **Phase 4**: 0%

### 완료된 작업
- [완료된 작업 목록]

### 진행 중인 작업
- [진행 중인 작업 목록]

### 블로커
- [블로커 목록]

---

## 🔗 관련 문서

- [명세서](./spec.md)
- [구현 계획](./plan.md)
- [프로젝트 Constitution](../../memory/constitution.md)

---

**작업 분해 버전**: 1.0  
**최종 업데이트**: 2025-12-04  
**다음 단계**: [Implementation 시작](../../SPEC_KIT_IMPLEMENTATION_CHECKLIST.md#phase-7-implementation-구현)

