# Critical 기능 점검 및 업데이트 체크리스트

## 📋 개요

- **작성일**: 2025-12-10
- **목적**: 기능 점검 및 개선사항 적용
- **기간**: 1주일 (7일)
- **우선순위**: Critical

---

## 🎯 주요 목표

1. **소셜 로그인 후 분석 프로세스 명확화** (최우선)
2. **AI Visibility + AIO 인용 알고리즘 업데이트**
3. **전체 시스템 안정성 및 성능 개선**

---

## 📅 타임라인 (1주일)

### Day 1-2: 소셜 로그인 후 분석 프로세스 개선 (Critical)
### Day 3-4: AI Visibility + AIO 알고리즘 업데이트
### Day 5-6: DB 스키마 및 데이터 정합성 개선
### Day 7: 통합 테스트 및 배포

---

## 🔴 Frontend 체크리스트

### ✅ Day 1-2: 소셜 로그인 후 분석 프로세스 (Critical)

#### 1.1 로그인 상태 확인 및 모달 표시
- [ ] **Critical**: 비로그인 상태에서 '분석 시작' 버튼 클릭 시 모달 표시 확인
- [ ] **Critical**: 모달에서 입력한 URL이 표시되는지 확인
- [ ] **Critical**: 모달 닫기 기능 정상 동작 확인
- [ ] **Critical**: 모달에서 소셜 로그인 버튼 클릭 시 로그인 페이지로 이동 확인
- [ ] **Critical**: URL 파라미터(`intent=analyze&url=...`) 전달 확인

#### 1.2 로그인 완료 후 자동 복귀 및 분석 시작
- [ ] **Critical**: 로그인 완료 후 원래 페이지로 복귀 확인
- [ ] **Critical**: URL 파라미터에서 `intent=analyze` 확인 시 자동 분석 시작
- [ ] **Critical**: 입력한 URL이 자동으로 복원되는지 확인
- [ ] **Critical**: localStorage에 저장된 URL이 정상적으로 복원되는지 확인
- [ ] **Critical**: URL 파라미터와 localStorage URL 우선순위 확인 (파라미터 > localStorage)
- [ ] **Critical**: 분석 시작 전 URL 입력 필드에 URL이 표시되는지 확인
- [ ] **Critical**: 분석 시작 시 로딩 상태 및 진행률 표시 정상 동작 확인

#### 1.3 에러 처리 및 사용자 경험
- [ ] **Critical**: 로그인 실패 시 에러 메시지 표시
- [ ] **Critical**: 분석 시작 실패 시 재시도 옵션 제공
- [ ] **Critical**: 네트워크 오류 시 적절한 에러 메시지 표시
- [ ] **Critical**: 세션 만료 시 자동 로그인 페이지 리디렉션
- [ ] **Critical**: 모바일 환경에서 모달 및 버튼 정상 동작 확인

#### 1.4 UI/UX 개선
- [ ] 모달 디자인 일관성 확인
- [ ] 로딩 상태 시각적 피드백 개선
- [ ] 분석 진행률 표시 정확성 확인
- [ ] 반응형 디자인 테스트 (모바일, 태블릿, 데스크톱)

### ✅ Day 3-4: AI Visibility + AIO 인용 알고리즘 업데이트

#### 2.1 AIO 인용 점수 계산 개선
- [ ] **Critical**: 기존 분석 결과 데이터 기반으로 알고리즘 검증
- [ ] **Critical**: ChatGPT 인용 확률 계산 로직 검토 및 개선
- [ ] **Critical**: Perplexity 인용 확률 계산 로직 검토 및 개선
- [ ] **Critical**: Gemini 인용 확률 계산 로직 검토 및 개선
- [ ] **Critical**: Claude 인용 확률 계산 로직 검토 및 개선
- [ ] 가중치 조정 (AEO/GEO/SEO 기반 계산)
- [ ] 보너스 점수 계산 로직 최적화
- [ ] 점수 범위 검증 (0-100)

#### 2.2 AI Visibility 점수 추가
- [ ] **Critical**: AI Visibility 점수 계산 함수 구현
- [ ] **Critical**: AI Visibility 점수 DB 저장 필드 추가
- [ ] **Critical**: AI Visibility 점수 UI 표시 컴포넌트 추가
- [ ] AI Visibility 점수 계산 기준 정의
- [ ] AI Visibility 점수 시각화 (차트/카드)
- [ ] AI Visibility 개선 가이드 제공

#### 2.3 AIO 인용 분석 결과 표시 개선
- [ ] **Critical**: AIOCitationCards 컴포넌트 정상 동작 확인
- [ ] **Critical**: AI 모델별 점수 정확성 검증
- [ ] **Critical**: AI 모델별 추천사항 정확성 검증
- [ ] AIOModal 상세 정보 표시 개선
- [ ] AI 모델별 인용 확률 비교 차트 추가
- [ ] AI 모델별 개선 가이드 상세화

#### 2.4 분석 결과 통합 표시
- [ ] AEO/GEO/SEO 점수와 AIO 점수 통합 표시
- [ ] 종합 점수 계산에 AI Visibility 반영 여부 검토
- [ ] 분석 결과 페이지 레이아웃 최적화

### ✅ Day 5-6: Frontend 안정성 개선

#### 3.1 에러 핸들링 강화
- [ ] API 호출 실패 시 재시도 로직 개선
- [ ] 네트워크 오류 처리 개선
- [ ] 타임아웃 처리 개선
- [ ] 사용자 친화적 에러 메시지 개선

#### 3.2 성능 최적화
- [ ] 컴포넌트 lazy loading 최적화
- [ ] 이미지 최적화
- [ ] 번들 크기 최적화
- [ ] 캐싱 전략 개선

#### 3.3 접근성 개선
- [ ] 키보드 네비게이션 지원
- [ ] 스크린 리더 지원
- [ ] ARIA 레이블 추가
- [ ] 색상 대비 비율 확인

---

## 🔵 Backend 체크리스트

### ✅ Day 1-2: 소셜 로그인 후 분석 프로세스 (Critical)

#### 1.1 분석 API 개선
- [ ] **Critical**: `/api/analyze` 엔드포인트에서 세션 확인 로직 검증
- [ ] **Critical**: 로그인된 사용자만 분석 가능하도록 검증 강화
- [ ] **Critical**: Provider별 사용자 ID 처리 정확성 확인
- [ ] **Critical**: 분석 결과 저장 시 사용자 ID 정확성 확인
- [ ] 분석 요청 시 URL 파라미터 처리
- [ ] 분석 결과 반환 시 캐시 처리 확인

#### 1.2 인증 및 세션 관리
- [ ] **Critical**: NextAuth 세션 관리 정확성 확인
- [ ] **Critical**: Provider별 사용자 식별 정확성 확인
- [ ] **Critical**: 세션 만료 처리
- [ ] OAuth 콜백 처리 검증
- [ ] 세션 갱신 로직 확인

#### 1.3 에러 처리 및 로깅
- [ ] **Critical**: 분석 실패 시 적절한 에러 응답
- [ ] **Critical**: 로그인 실패 시 에러 처리
- [ ] 상세한 에러 로깅 추가
- [ ] 에러 모니터링 설정

### ✅ Day 3-4: AI Visibility + AIO 인용 알고리즘 업데이트

#### 2.1 AIO 인용 점수 계산 API 개선
- [ ] **Critical**: `lib/ai-citation-analyzer.ts` 알고리즘 검증
- [ ] **Critical**: 기존 분석 결과 데이터 기반 알고리즘 검증
- [ ] **Critical**: AIO 점수 계산 정확성 검증
- [ ] ChatGPT 보너스 점수 계산 로직 개선
- [ ] Perplexity 보너스 점수 계산 로직 개선
- [ ] Gemini 보너스 점수 계산 로직 개선
- [ ] Claude 보너스 점수 계산 로직 개선
- [ ] 가중치 조정 및 최적화

#### 2.2 AI Visibility 점수 계산 구현
- [ ] **Critical**: AI Visibility 점수 계산 함수 구현
- [ ] **Critical**: AI Visibility 점수 계산 기준 정의
- [ ] AI Visibility 점수 계산 알고리즘 설계
- [ ] AI Visibility 점수 계산 API 엔드포인트 추가
- [ ] AI Visibility 점수 DB 저장 로직 추가

#### 2.3 분석 결과 저장 개선
- [ ] **Critical**: AIO 점수 저장 정확성 확인
- [ ] **Critical**: AI Visibility 점수 저장 필드 추가
- [ ] 분석 결과 저장 시 트랜잭션 처리
- [ ] 분석 결과 저장 시 데이터 검증 강화

#### 2.4 분석 결과 조회 개선
- [ ] 분석 이력 조회 API 성능 최적화
- [ ] 분석 결과 캐싱 전략 개선
- [ ] 분석 결과 필터링 및 정렬 기능 개선

### ✅ Day 5-6: Backend 안정성 개선

#### 3.1 API 성능 최적화
- [ ] 분석 API 응답 시간 개선
- [ ] 데이터베이스 쿼리 최적화
- [ ] 캐싱 전략 개선
- [ ] 레이트 리미팅 개선

#### 3.2 보안 강화
- [ ] 입력 데이터 검증 강화
- [ ] SQL Injection 방지 확인
- [ ] XSS 방지 확인
- [ ] CSRF 보호 확인

#### 3.3 모니터링 및 로깅
- [ ] 상세한 로깅 추가
- [ ] 에러 모니터링 설정
- [ ] 성능 모니터링 설정
- [ ] 사용자 행동 추적 (선택적)

---

## 🗄️ Database 체크리스트

### ✅ Day 1-2: 소셜 로그인 후 분석 프로세스 (Critical)

#### 1.1 사용자 테이블 검증
- [ ] **Critical**: `users` 테이블 스키마 정확성 확인
- [ ] **Critical**: Provider별 사용자 식별 정확성 확인
- [ ] **Critical**: `idx_users_email_provider` 인덱스 정확성 확인
- [ ] 사용자 생성 시 데이터 무결성 확인
- [ ] 사용자 조회 성능 확인

#### 1.2 분석 결과 테이블 검증
- [ ] **Critical**: `analyses` 테이블 스키마 정확성 확인
- [ ] **Critical**: `user_id` 외래 키 제약 조건 확인
- [ ] **Critical**: 분석 결과 저장 시 데이터 무결성 확인
- [ ] 분석 결과 조회 성능 확인

### ✅ Day 3-4: AI Visibility + AIO 인용 알고리즘 업데이트

#### 2.1 AIO 점수 필드 검증
- [ ] **Critical**: `chatgpt_score` 필드 정확성 확인
- [ ] **Critical**: `perplexity_score` 필드 정확성 확인
- [ ] **Critical**: `gemini_score` 필드 정확성 확인
- [ ] **Critical**: `claude_score` 필드 정확성 확인
- [ ] AIO 점수 필드 NULL 허용 여부 확인
- [ ] AIO 점수 범위 검증 (0-100)

#### 2.2 AI Visibility 점수 필드 추가
- [ ] **Critical**: `ai_visibility_score` 필드 추가
- [ ] **Critical**: `ai_visibility_score` 필드 타입 및 제약 조건 정의
- [ ] **Critical**: 기존 분석 결과에 대한 마이그레이션 스크립트 작성
- [ ] AI Visibility 점수 인덱스 추가 (필요시)
- [ ] AI Visibility 점수 조회 쿼리 최적화

#### 2.3 데이터 정합성 개선
- [ ] **Critical**: 기존 분석 결과 데이터 정합성 검증
- [ ] **Critical**: AIO 점수 누락 데이터 확인 및 보완
- [ ] 데이터 마이그레이션 스크립트 작성
- [ ] 데이터 백업 전략 수립

### ✅ Day 5-6: Database 안정성 개선

#### 3.1 인덱스 최적화
- [ ] 사용자별 분석 조회 인덱스 최적화
- [ ] URL 기반 중복 검사 인덱스 최적화
- [ ] 날짜 기반 조회 인덱스 최적화
- [ ] AIO 점수 기반 조회 인덱스 추가 (필요시)

#### 3.2 트랜잭션 관리
- [ ] 분석 결과 저장 시 트랜잭션 처리 확인
- [ ] 사용자 생성 시 트랜잭션 처리 확인
- [ ] 데이터 일관성 보장 확인

#### 3.3 백업 및 복구
- [ ] 정기 백업 스케줄 설정
- [ ] 백업 데이터 검증
- [ ] 복구 프로세스 문서화

---

## 🧪 테스트 체크리스트

### ✅ Day 1-2: 소셜 로그인 후 분석 프로세스 테스트

#### 1.1 단위 테스트
- [ ] LoginRequiredModal 컴포넌트 테스트
- [ ] URL 파라미터 파싱 로직 테스트
- [ ] localStorage 저장/복원 로직 테스트
- [ ] 세션 확인 로직 테스트

#### 1.2 통합 테스트
- [ ] **Critical**: 비로그인 → 모달 표시 → 로그인 → 분석 시작 플로우 테스트
- [ ] **Critical**: 로그인 완료 후 자동 분석 시작 테스트
- [ ] **Critical**: URL 파라미터 전달 및 복원 테스트
- [ ] **Critical**: localStorage URL 복원 테스트
- [ ] 에러 케이스 테스트 (로그인 실패, 분석 실패 등)

#### 1.3 E2E 테스트
- [ ] 전체 사용자 플로우 테스트
- [ ] 다양한 브라우저 테스트
- [ ] 모바일 환경 테스트

### ✅ Day 3-4: AI Visibility + AIO 알고리즘 테스트

#### 2.1 단위 테스트
- [ ] AIO 점수 계산 함수 테스트
- [ ] AI Visibility 점수 계산 함수 테스트
- [ ] 각 AI 모델별 보너스 점수 계산 테스트

#### 2.2 통합 테스트
- [ ] **Critical**: 기존 분석 결과 데이터 기반 알고리즘 검증
- [ ] **Critical**: AIO 점수 정확성 검증
- [ ] **Critical**: AI Visibility 점수 정확성 검증
- [ ] 분석 결과 저장 및 조회 테스트

#### 2.3 성능 테스트
- [ ] 분석 API 응답 시간 테스트
- [ ] 대량 데이터 처리 테스트
- [ ] 동시 요청 처리 테스트

### ✅ Day 5-7: 통합 테스트

#### 3.1 전체 시스템 테스트
- [ ] 전체 플로우 통합 테스트
- [ ] 에러 케이스 통합 테스트
- [ ] 성능 통합 테스트

#### 3.2 사용자 수용 테스트
- [ ] 실제 사용자 시나리오 테스트
- [ ] 다양한 콘텐츠 유형 테스트
- [ ] 다양한 플랫폼 테스트 (네이버 블로그, 브런치 등)

---

## 📊 검증 기준

### Critical 항목 검증 기준

#### 소셜 로그인 후 분석 프로세스
- ✅ 비로그인 상태에서 분석 시작 버튼 클릭 시 모달 표시
- ✅ 로그인 완료 후 자동으로 분석 시작
- ✅ 입력한 URL이 정상적으로 복원 및 분석 시작
- ✅ 에러 발생 시 적절한 에러 메시지 표시

#### AI Visibility + AIO 알고리즘
- ✅ AIO 점수 계산 정확성 (기존 데이터 기반 검증)
- ✅ AI Visibility 점수 계산 정확성
- ✅ 분석 결과 저장 및 조회 정상 동작
- ✅ UI에 점수 정상 표시

---

## 🚀 배포 체크리스트

### Day 7: 배포 준비

- [ ] 모든 Critical 항목 완료 확인
- [ ] 테스트 통과 확인
- [ ] 코드 리뷰 완료
- [ ] 문서 업데이트 완료
- [ ] 배포 전 백업 완료
- [ ] 배포 스크립트 검증
- [ ] 롤백 계획 수립

---

## 📝 진행 상황 추적

### Day 1-2 진행 상황
- [ ] Frontend: 소셜 로그인 후 분석 프로세스
- [ ] Backend: 분석 API 개선
- [ ] Database: 사용자 및 분석 결과 테이블 검증

### Day 3-4 진행 상황
- [ ] Frontend: AI Visibility + AIO UI 개선
- [ ] Backend: AI Visibility + AIO 알고리즘 업데이트
- [ ] Database: AI Visibility 점수 필드 추가

### Day 5-6 진행 상황
- [ ] Frontend: 안정성 개선
- [ ] Backend: 안정성 개선
- [ ] Database: 인덱스 최적화

### Day 7 진행 상황
- [ ] 통합 테스트
- [ ] 배포 준비
- [ ] 배포 실행

---

## 🔗 관련 문서

- [로그인 전 분석 시작 UX 개선 명세서](../007-login-before-analysis/spec.md)
- [AIO 기능 아이디어](../../AIO_FEATURE_IDEA.md)
- [데이터베이스 스키마](../../database/schema.sql)
- [알고리즘 학습 시스템](../../ALGORITHM_LEARNING_SYSTEM.md)

---

**최종 업데이트**: 2025-12-10  
**상태**: 진행 중  
**담당자**: 개발팀

